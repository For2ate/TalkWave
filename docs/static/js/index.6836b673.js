(()=>{"use strict";var e={260:function(){},456:function(e,t,s){s.d(t,{Z:()=>a});let a={layout:"layout-H7v4aW",layoutContainer:"layoutContainer-rMH9bz"}},665:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{Z:()=>o});var r=s(893),n=s(49),i=s(73);s(260);var l=e([n]);n=(l.then?(await l)():l)[0];let o=()=>(0,r.jsx)(i.g,{children:(0,r.jsx)(n.W,{})});a()}catch(e){a(e)}})},704:function(e,t,s){s.d(t,{H:()=>i,A:()=>l});var a=s(893),r=s(294);let n=(0,r.createContext)({isOpen:!1,toggleSideBar:()=>{},openSideBar:()=>{},closeSideBar:()=>{}}),i=e=>{let{children:t}=e,[s,i]=(0,r.useState)(!0);return(0,a.jsx)(n.Provider,{value:{isOpen:s,toggleSideBar:()=>i(e=>!e),openSideBar:()=>i(!0),closeSideBar:()=>i(!1)},children:t})},l=()=>{let e=(0,r.useContext)(n);if(!e)throw Error("useSidebar must be used within a SidebarProvider");return e}},980:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{W:()=>h});var r=s(893),n=s(776),i=s(671),l=s(836),o=s(303),c=s(649),d=e([i]);i=(d.then?(await d)():d)[0];let u=(0,n.cP)([{path:"/",element:(0,r.jsx)(i.U,{}),children:[{path:"chats/:chatId",element:(0,r.jsx)(c.z,{})}]},{path:"/login",element:(0,r.jsx)(l.X,{})},{path:"/register",element:(0,r.jsx)(l.o,{})}]),h=()=>(0,r.jsx)(o.p,{router:u});a()}catch(e){a(e)}})},49:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{W:()=>r.W});var r=s(980),n=e([r]);r=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},73:function(e,t,s){s.d(t,{g:()=>o});var a=s(893),r=s(722),n=s(672),i=s(885);let l=(0,n.xC)({reducer:{chats:i.wZ,messages:i.tU}}),o=e=>{let{children:t}=e;return(0,a.jsx)(r.zt,{store:l,children:t})}},660:function(e,t,s){s.d(t,{d:()=>r});var a=s(821);let r={getChats:async e=>{try{return await a.Wj.get(`Api/Chats/Chats/${e}`)}catch(e){return console.error(e),null}},createPersonalChat:async e=>{try{return await a.Wj.post("Api/Chats/Chat/Personal",e)}catch(e){return null}}}},107:function(e,t,s){s.d(t,{u:()=>r});var a=s(821);let r={getMessageById:async e=>{try{return await a.Wj.get(`Api/Message/Message/${e}`)}catch(e){return console.error(e),null}},getMessagesFromMessage:async e=>{try{let t=new URLSearchParams;return t.append("chatId",e.chatId),t.append("messageId",e.messageId),t.append("take",e.take.toString()),await a.Wj.get(`Api/Message/Messages?${t.toString()}`)}catch(e){return console.error(e),null}}}},431:function(e,t,s){s.d(t,{E:()=>o,g:()=>l});var a=s(672),r=s(107),n=s(660),i=s(821);let l=(0,a.hg)("chats/fetchChats",async(e,t)=>{let{rejectWithValue:s}=t;try{let e=localStorage.getItem("userId");if(!e)throw Error("User ID not found");let t=await n.d.getChats(e);if(!t)throw Error("No chats received");return await Promise.all(t.map(async t=>{let s=null;t.lastMessageId&&(s=await r.u.getMessageById(t.lastMessageId));let a={id:t.id,name:t.name,isGroupChat:t.isGroupChat,createdAt:t.createdAt,createdBy:t.createdBy,role:t.role,lastMessage:s,chatMembers:t.chatMembers};if(!1===t.isGroupChat){let s="";s=t.chatMembers[0].id===e?t.chatMembers[1].id:t.chatMembers[0].id;let r=await i.Sj.getUserById(s);a.name=`${null==r?void 0:r.firstName} ${null==r?void 0:r.lastName}`}return a}))}catch(e){return s(e instanceof Error?e.message:"Unknown error")}}),o=(0,a.hg)("messages/load",async(e,t)=>{let{getState:s,rejectWithValue:a}=t;try{let{chatId:t,messageId:a,take:n=20,direction:i}=e,l=s();if("before"===i&&!1===l.messages.hasMore[t]||!a)return{chatId:t,messages:[],direction:i,hasMore:!1};let o=await r.u.getMessagesFromMessage({chatId:t,messageId:a,take:n})||[],c=o.length>=n;return{chatId:t,messages:o,direction:i,hasMore:c}}catch(e){return a(e instanceof Error?e.message:"Unknown error")}})},570:function(e,t,s){s.d(t,{ND:()=>l,VV:()=>o,wZ:()=>c,zU:()=>i});var a=s(672),r=s(431);let n=(0,a.oM)({name:"chats",initialState:{chats:{},selectedChatId:null,status:"idle",error:null},reducers:{setSelectedChat:(e,t)=>{e.selectedChatId=t.payload},updateLastMessage:(e,t)=>{let{chatId:s,message:a}=t.payload;e.chats[s]&&(e.chats[s].lastMessage=a)},addChat:(e,t)=>{let s=t.payload;e.chats[s.id]||(e.chats[s.id]=s)}},extraReducers:e=>{e.addCase(r.g.pending,e=>{e.status="loading"}),e.addCase(r.g.fulfilled,(e,t)=>{e.status="succeeded",t.payload.forEach(t=>{e.chats[t.id]=t})}),e.addCase(r.g.rejected,(e,t)=>{e.status="failed",e.error=t.error.message||"Failed to load chats"})}}),{setSelectedChat:i,updateLastMessage:l,addChat:o}=n.actions,c=n.reducer},885:function(e,t,s){s.d(t,{wZ:()=>a.wZ,hI:()=>h,tU:()=>o,Bz:()=>u,jr:()=>d,EV:()=>n.E,gE:()=>n.g,tr:()=>c,ND:()=>a.ND,PL:()=>l,zU:()=>a.zU});var a=s(570),r=s(672),n=s(431);let i=(0,r.oM)({name:"messages",initialState:{messages:{},hasMore:{},loading:!1,error:null},reducers:{addNewMessage:(e,t)=>{let s=t.payload;e.messages[s.chatId]||(e.messages[s.chatId]=[]),e.messages[s.chatId].push(s)}},extraReducers:e=>{e.addCase(n.E.pending,e=>{e.loading=!0,e.error=null}).addCase(n.E.fulfilled,(e,t)=>{let{chatId:s,messages:a,direction:r,hasMore:n}=t.payload;if(e.loading=!1,"before"===r&&(e.hasMore[s]=n),!a.length)return;let i=e.messages[s]||[],l=new Set(i.map(e=>e.id)),o=a.filter(e=>!l.has(e.id));o.length&&(e.messages[s]="before"===r?[...o,...i]:[...i,...o])}).addCase(n.E.rejected,(e,t)=>{e.loading=!1,e.error=t.payload})}}),{addNewMessage:l}=i.actions,o=i.reducer,c=e=>Object.values(e.chats.chats),d=e=>e.chats.selectedChatId?e.chats.chats[e.chats.selectedChatId]:null,u=e=>t=>t.messages.messages[e],h=e=>t=>t.messages.messages[e]},649:function(e,t,s){s.d(t,{z:()=>g});var a=s(893),r=s(776),n=s(294);let i=e=>{let{onSend:t}=e,[s,r]=(0,n.useState)(""),i=(0,n.useRef)(null),l=()=>{s&&(t(s),r(""),i.current&&(i.current.style.height="auto"))};return(0,n.useEffect)(()=>{let e=i.current;e&&(()=>{e.style.height="auto";let t=Math.min(e.scrollHeight,200);e.style.height=`${t}px`,e.scrollHeight>200?e.style.overflowY="auto":e.style.overflowY="hidden"})()},[s]),(0,a.jsx)("div",{className:"layout-Pjzv6Y",children:(0,a.jsx)("main",{className:"main-X0wZqe",children:(0,a.jsxs)("div",{className:"inputContainer-LmS4SY",children:[(0,a.jsx)("div",{className:"textareaWrapper-GurJ3n",children:(0,a.jsx)("textarea",{ref:i,value:s,onChange:e=>r(e.target.value),onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),l())},placeholder:"Type a message...",className:"inputField-ikFc_U",rows:1})}),(0,a.jsx)("button",{onClick:e=>{e.preventDefault(),l()},className:"sendButton-F3tYtR",children:(0,a.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"sendIcon-XlAeVa",children:(0,a.jsx)("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]})})})};var l=s(936),o=s(234),c=s(885);let d={message:"message-yBAyn8",currentUser:"currentUser-e0Qi3_",otherUser:"otherUser-f8dFXV",content:"content-shmu1F",time:"time-yUJZlw"},u=e=>{let{message:t,isCurrentUser:s}=e,r=new Date(t.sentAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),n=new Date(t.sentAt).toLocaleString("ru-RU",{day:"numeric",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit"});return(0,a.jsxs)("div",{className:`${d.message} ${s?d.currentUser:d.otherUser}`,children:[(0,a.jsx)("div",{className:d.content,children:t.content}),(0,a.jsx)("div",{className:d.time,title:n,children:r})]})},h=e=>{let{chatId:t}=e,s=(0,o.TL)(),r=(0,o.CG)((0,c.Bz)(t)),i=(0,o.CG)(c.jr),l=(0,o.CG)((0,c.hI)(t)),d=localStorage.userId,h=(0,n.useRef)(null),g=()=>{var e;null===(e=h.current)||void 0===e||e.scrollIntoView({behavior:"auto"})};(0,n.useEffect)(()=>{let e=async()=>{var e;await s((0,c.EV)({chatId:t,take:20,direction:"after",messageId:null==i?void 0:null===(e=i.lastMessage)||void 0===e?void 0:e.id})),g()},a=async()=>{await s((0,c.zU)(t))};t&&!i&&a(),(null==i?void 0:i.lastMessage)&&!r&&e()},[i,t]);let x=(0,n.useRef)(null),j=async()=>{if(!x.current||!l)return;let e=x.current,a=e.scrollTop,n=e.scrollHeight,i=e.clientHeight;a<100&&n>i&&await s((0,c.EV)({chatId:t,messageId:r[0].id,take:20,direction:"before"}))},m=(0,o.AE)();return(0,n.useEffect)(()=>{let e=async e=>{await s((0,c.PL)(e)),await s((0,c.ND)({chatId:t,message:e})),e.senderId===d&&g()};null==m||m.on("ReceiveMessage",e)},[m]),(0,a.jsxs)("div",{className:"layout-wxTRHX",ref:x,onScroll:j,children:[null==r?void 0:r.map(e=>(0,a.jsx)(u,{message:e,isCurrentUser:e.senderId===d},e.id)),(0,a.jsx)("div",{ref:h})]})},g=()=>{let{chatId:e}=(0,r.UO)();(0,l.TL)();let t=(0,l.AE)(),s=async s=>{if(!t)return;let a={senderId:localStorage.userId,chatId:e,content:s};await t.invoke("SendMessage",a)};return(0,a.jsxs)("div",{className:"layout-mNXrCZ",children:[(0,a.jsx)("header",{className:"header-dPOFXM",children:(0,a.jsxs)("h1",{children:["Чат ",e]})}),(0,a.jsx)("main",{className:"main-VYqu5F",children:e&&(0,a.jsx)(h,{chatId:e})}),(0,a.jsx)("footer",{className:"footer-qW4Y_U",children:(0,a.jsx)(i,{onSend:s})})]})}},145:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{U:()=>e});var r=s(893),n=s(456),i=s(776),l=s(704),o=s(769),c=s(783),d=s(44),u=s(294),h=s(234);await c.A.connect(`${d.C}/ChatHub`);let e=()=>{let e=(0,h.AE)();return(0,u.useEffect)(()=>{let t=async()=>{let t=localStorage.userId;await (null==e?void 0:e.invoke("JoinHub",t))};e&&t()},[e]),(0,r.jsx)("div",{className:n.Z.layout,children:(0,r.jsxs)("div",{className:n.Z.layoutContainer,children:[(0,r.jsx)(l.H,{children:(0,r.jsx)(o.Y,{})}),(0,r.jsx)(i.j3,{})]})})};a()}catch(e){a(e)}},1)},598:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{U:()=>r.U});var r=s(145),n=e([r]);r=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},671:function(e,t,s){s.a(e,async function(e,a){try{s.d(t,{U:()=>r.U});var r=s(598),n=e([r]);r=(n.then?(await n)():n)[0],a()}catch(e){a(e)}})},836:function(e,t,s){s.d(t,{X:()=>h,o:()=>u});var a=s(893),r=s(294),n=s(522),i=s(430),l=s(44);let o=async e=>{try{return(await i.Z.post(`${l.w}/Api/Auth/Login`,e)).data}catch(e){if(i.Z.isAxiosError(e)){var t;console.error("Error login user:",(null===(t=e.response)||void 0===t?void 0:t.data)||e.message)}else console.error("Unexpected error:",e);return null}},c=async e=>{try{let t=await i.Z.post(`${l.w}/Api/Auth/Register`,e);return{success:!0,data:t.data}}catch(e){if(!i.Z.isAxiosError(e))return console.error("Unexpected error:",e),{success:!1,errors:{General:["An unexpected error occurred."]}};{var t;let s=null===(t=e.response)||void 0===t?void 0:t.data,a="";return("Login is already taken."===s||"Email is already taken."===s)&&(a=s.split(" ")[0]),{success:!1,errors:(null==s?void 0:s.errors)||{[a]:[s]}}}}};var d=s(776);let u=()=>{let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),[l,o]=(0,r.useState)(""),[u,h]=(0,r.useState)(""),[g,x]=(0,r.useState)(""),j=(0,d.s0)(),m=async()=>{let t=await c({login:s,email:l,password:u,firstname:e,lastname:""});t.success?(localStorage.userId=t.data.id,localStorage.userFirstName=t.data.firstname,localStorage.userLastName=t.data.lastname,localStorage.userEmail=t.data.email,j("/")):console.error("Register failed:",t.errors)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"layout-HfbGg0",children:(0,a.jsxs)("main",{className:"container-hXUDKp",children:[(0,a.jsx)("h1",{children:"Register"}),(0,a.jsxs)("div",{className:"box-IlcWSa",children:[(0,a.jsx)(n.Fy,{label:"First Name",type:"input",onChange:e=>{t(e.target.value)},value:e}),(0,a.jsx)(n.Fy,{label:"Login",type:"input",onChange:e=>{i(e.target.value)},value:s}),(0,a.jsx)(n.Fy,{label:"Email",type:"Email",onChange:e=>{o(e.target.value)},value:l}),(0,a.jsx)(n.Fy,{label:"Password",type:"password",onChange:e=>{h(e.target.value)},value:u}),(0,a.jsx)(n.Fy,{label:"Confirm password",type:"password",onChange:e=>{x(e.target.value)},value:g}),(0,a.jsx)(n.Sn,{onClick:m,children:(0,a.jsx)("p",{children:"Register"})})]}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"/login",children:" Login "})})]})})})},h=()=>{let[e,t]=(0,r.useState)(""),[s,i]=(0,r.useState)(""),l=(0,d.s0)(),c=async()=>{console.log(`login: ${e} password: ${s}`);let t=await o({login:e,password:s});t?(localStorage.userId=t.id,localStorage.userFirstName=t.firstName,localStorage.userLastName=t.lastName,localStorage.userEmail=t.email,l("/")):console.error("Login failed:",t)};return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)("div",{className:"layout-_qnx2N",children:(0,a.jsxs)("main",{className:"container-vKJ05s",children:[(0,a.jsx)("h1",{children:"Sign In"}),(0,a.jsxs)("div",{className:"box-IRk64R",children:[(0,a.jsx)(n.Fy,{label:"Login",type:"input",onChange:e=>{t(e.target.value)},value:e}),(0,a.jsx)(n.Fy,{label:"Password",type:"password",onChange:e=>{i(e.target.value)},value:s}),(0,a.jsx)(n.Sn,{onClick:c,children:(0,a.jsx)("p",{children:"Login"})})]}),(0,a.jsx)("p",{children:(0,a.jsx)("a",{href:"/register",children:" Register "})})]})})})}},44:function(e,t,s){s.d(t,{C:()=>r,w:()=>a});let a="https://localhost:7163",r="https://localhost:7047"},821:function(e,t,s){s.d(t,{Wj:()=>i,Sj:()=>c});var a=s(430),r=s(44);let n=a.Z.create({baseURL:r.C,timeout:1e4,headers:{"Content-Type":"application/json"}}),i={get:(e,t)=>n.get(e,t).then(e=>e.data),post:(e,t,s)=>n.post(e,t,s).then(e=>e.data),put:(e,t,s)=>n.put(e,t,s).then(e=>e.data),delete:(e,t)=>n.delete(e,t).then(e=>e.data)},l=a.Z.create({baseURL:r.w,timeout:1e4,headers:{"Content-Type":"application/json"}}),o={get:(e,t)=>l.get(e,t).then(e=>e.data)},c={getUserById:async e=>{try{return await o.get(`Api/User/${e}`)}catch(e){return console.error(e),null}},getUserByEmail:async e=>{try{let t=new URLSearchParams;return t.append("email",e),await o.get(`Api/User/GetByEmail?${t.toString()}`)}catch(e){return null}}}},936:function(e,t,s){s.d(t,{CG:()=>c,AE:()=>i,TL:()=>o});var a=s(294),r=s(44),n=s(783);let i=()=>{let[e,t]=(0,a.useState)(null);return(0,a.useEffect)(()=>((async()=>{try{let e=await n.A.connect(`${r.C}/ChatHub`);t(e)}catch(e){console.error("Failed to connect:",e)}})(),()=>{}),[]),e};var l=s(722);let o=l.I0.withTypes(),c=l.v9.withTypes()},783:function(e,t,s){s.d(t,{A:()=>l});var a=s(412),r=s(622),n=s(239);class i{static getInstance(){return i.instance||(i.instance=new i),i.instance}async connect(e){if(this.connection&&"Connected"===this.connection.state)return this.connection;this.connection=new r.s().withUrl(e).withAutomaticReconnect().configureLogging(n.i.Information).build();try{return await this.connection.start(),console.log("SignalR connected"),this.connection}catch(e){throw console.error("Connection failed:",e),this.connection=null,e}}async stopConnection(){this.connection&&(await this.connection.stop(),this.connection=null)}getConnection(){return this.connection}constructor(){(0,a._)(this,"connection",null)}}(0,a._)(i,"instance",void 0);let l=i.getInstance()},234:function(e,t,s){s.d(t,{CG:()=>a.CG,AE:()=>a.AE,TL:()=>a.TL});var a=s(936);s(783)},522:function(e,t,s){s.d(t,{Fy:()=>i,u_:()=>c,vJ:()=>d,W1:()=>h,Sn:()=>l,hU:()=>g,$C:()=>u});var a=s(893),r=s(294);let n={label:"label-faN5iI",layout:"layout-LiKiQJ",input:"input-LgQaZS"},i=e=>{let{label:t,value:s,onChange:r,...i}=e;return(0,a.jsxs)("div",{className:n.layout,children:[t&&(0,a.jsx)("label",{className:n.label,children:t}),(0,a.jsx)("input",{type:i.type||"text",value:s,onChange:r,className:n.input,...i})]})},l=e=>{let{children:t,onClick:s,...r}=e;return(0,a.jsx)("button",{onClick:s,className:"button-JT_YUc",...r,children:t})},o={overlay:"overlay-aaGjKQ",modal:"modal-D2c3OW",title:"title-_dqo09",closeButton:"closeButton-xLHjQp",content:"content-khSGbq"},c=e=>{let{isOpen:t,onClose:s,children:n,title:i}=e,l=(0,r.useRef)(null);return((0,r.useEffect)(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),t)?(0,a.jsx)("div",{className:o.overlay,onClick:s,children:(0,a.jsxs)("div",{ref:l,className:o.modal,onClick:e=>e.stopPropagation(),children:[i&&(0,a.jsx)("h2",{className:o.title,children:i}),(0,a.jsx)("button",{className:o.closeButton,onClick:s,children:"\xd7"}),(0,a.jsx)("div",{className:o.content,children:n})]})}):null},d=e=>{let{color:t}=e;return(0,a.jsxs)("svg",{fill:t,viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},children:[(0,a.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,a.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,a.jsx)("rect",{id:"Icons",x:"-1088",y:"0",width:"1280",height:"800",style:{fill:"none"}}),(0,a.jsxs)("g",{id:"Icons1",children:[(0,a.jsx)("g",{id:"Strike"}),(0,a.jsx)("g",{id:"H1"}),(0,a.jsx)("g",{id:"H2"}),(0,a.jsx)("g",{id:"H3"}),(0,a.jsx)("g",{id:"list-ul"}),(0,a.jsx)("g",{id:"hamburger-1"}),(0,a.jsx)("g",{id:"hamburger-2"}),(0,a.jsx)("g",{id:"list-ol"}),(0,a.jsx)("g",{id:"list-task"}),(0,a.jsx)("g",{id:"trash"}),(0,a.jsx)("g",{id:"vertical-menu"}),(0,a.jsx)("g",{id:"horizontal-menu"}),(0,a.jsx)("g",{id:"sidebar-2"}),(0,a.jsx)("g",{id:"Pen"}),(0,a.jsx)("g",{id:"Pen1"}),(0,a.jsx)("g",{id:"clock"}),(0,a.jsx)("g",{id:"external-link"}),(0,a.jsx)("g",{id:"hr"}),(0,a.jsx)("g",{id:"info"}),(0,a.jsx)("g",{id:"warning"}),(0,a.jsx)("g",{id:"plus-circle"}),(0,a.jsx)("g",{id:"minus-circle"}),(0,a.jsx)("g",{id:"vue"}),(0,a.jsx)("g",{id:"cog"}),(0,a.jsx)("g",{id:"logo"}),(0,a.jsx)("g",{id:"radio-check"}),(0,a.jsx)("g",{id:"eye-slash"}),(0,a.jsx)("g",{id:"eye"}),(0,a.jsx)("g",{id:"toggle-off"}),(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{id:"sidebar",d:"M49.984,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"}),(0,a.jsx)("path",{id:"code",d:"M19.999,38.774l-6.828,-6.828l6.828,-6.829l2.829,2.829l-4,4l4,4l-2.829,2.828Z"})]}),(0,a.jsx)("g",{id:"shredder"}),(0,a.jsx)("g",{id:"spinner--loading--dots-"}),(0,a.jsx)("g",{id:"react"}),(0,a.jsx)("g",{id:"check-selected"}),(0,a.jsx)("g",{id:"turn-off"}),(0,a.jsx)("g",{id:"code-block"}),(0,a.jsx)("g",{id:"user"}),(0,a.jsx)("g",{id:"coffee-bean"}),(0,a.jsx)("g",{id:"coffee-beans",children:(0,a.jsx)("g",{id:"coffee-bean1"})}),(0,a.jsx)("g",{id:"coffee-bean-filled"}),(0,a.jsx)("g",{id:"coffee-beans-filled",children:(0,a.jsx)("g",{id:"coffee-bean2"})}),(0,a.jsx)("g",{id:"clipboard"}),(0,a.jsx)("g",{id:"clipboard-paste"}),(0,a.jsx)("g",{id:"clipboard-copy"}),(0,a.jsx)("g",{id:"Layer1"})]})]})]})},u=e=>{let{color:t}=e;return(0,a.jsxs)("svg",{fill:t,viewBox:"0 0 64 64",version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",xmlSpace:"preserve",style:{fillRule:"evenodd",clipRule:"evenodd",strokeLinejoin:"round",strokeMiterlimit:2},children:[(0,a.jsx)("g",{id:"SVGRepo_bgCarrier",strokeWidth:"0"}),(0,a.jsx)("g",{id:"SVGRepo_tracerCarrier",strokeLinecap:"round",strokeLinejoin:"round"}),(0,a.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[(0,a.jsx)("rect",{id:"Icons",x:"-1152",y:"0",width:"1280",height:"800",style:{fill:"none"}}),(0,a.jsxs)("g",{id:"Icons1",children:[(0,a.jsx)("g",{id:"Strike"}),(0,a.jsx)("g",{id:"H1"}),(0,a.jsx)("g",{id:"H2"}),(0,a.jsx)("g",{id:"H3"}),(0,a.jsx)("g",{id:"list-ul"}),(0,a.jsx)("g",{id:"hamburger-1"}),(0,a.jsx)("g",{id:"hamburger-2"}),(0,a.jsx)("g",{id:"list-ol"}),(0,a.jsx)("g",{id:"list-task"}),(0,a.jsx)("g",{id:"trash"}),(0,a.jsx)("g",{id:"vertical-menu"}),(0,a.jsx)("g",{id:"horizontal-menu"}),(0,a.jsx)("g",{id:"sidebar-2"}),(0,a.jsx)("g",{id:"Pen"}),(0,a.jsx)("g",{id:"Pen1"}),(0,a.jsx)("g",{id:"clock"}),(0,a.jsx)("g",{id:"external-link"}),(0,a.jsx)("g",{id:"hr"}),(0,a.jsx)("g",{id:"info"}),(0,a.jsx)("g",{id:"warning"}),(0,a.jsx)("g",{id:"plus-circle"}),(0,a.jsx)("g",{id:"minus-circle"}),(0,a.jsx)("g",{id:"vue"}),(0,a.jsx)("g",{id:"cog"}),(0,a.jsx)("g",{id:"logo"}),(0,a.jsx)("g",{id:"radio-check"}),(0,a.jsx)("g",{id:"eye-slash"}),(0,a.jsx)("g",{id:"eye"}),(0,a.jsx)("g",{id:"toggle-off"}),(0,a.jsxs)("g",{children:[(0,a.jsx)("path",{id:"sidebar",d:"M50.008,56l-35.989,0c-3.309,0 -5.995,-2.686 -5.995,-5.995l0,-36.011c0,-3.308 2.686,-5.995 5.995,-5.995l35.989,0c3.309,0 5.995,2.687 5.995,5.995l0,36.011c0,3.309 -2.686,5.995 -5.995,5.995Zm-25.984,-4.001l0,-39.999l-9.012,0c-1.65,0 -2.989,1.339 -2.989,2.989l0,34.021c0,1.65 1.339,2.989 2.989,2.989l9.012,0Zm24.991,-39.999l-20.991,0l0,39.999l20.991,0c1.65,0 2.989,-1.339 2.989,-2.989l0,-34.021c0,-1.65 -1.339,-2.989 -2.989,-2.989Z"}),(0,a.jsx)("path",{id:"code",d:"M16.024,38.774l6.828,-6.828l-6.828,-6.829l-2.829,2.829l4,4l-4,4l2.829,2.828Z"})]}),(0,a.jsx)("g",{id:"shredder"}),(0,a.jsx)("g",{id:"spinner--loading--dots-"}),(0,a.jsx)("g",{id:"react"}),(0,a.jsx)("g",{id:"check-selected"}),(0,a.jsx)("g",{id:"turn-off"}),(0,a.jsx)("g",{id:"code-block"}),(0,a.jsx)("g",{id:"user"}),(0,a.jsx)("g",{id:"coffee-bean"}),(0,a.jsx)("g",{id:"coffee-beans",children:(0,a.jsx)("g",{id:"coffee-bean1"})}),(0,a.jsx)("g",{id:"coffee-bean-filled"}),(0,a.jsx)("g",{id:"coffee-beans-filled",children:(0,a.jsx)("g",{id:"coffee-bean2"})}),(0,a.jsx)("g",{id:"clipboard"}),(0,a.jsx)("g",{id:"clipboard-paste"}),(0,a.jsx)("g",{id:"clipboard-copy"}),(0,a.jsx)("g",{id:"Layer1"})]})]})]})},h=e=>{let{color:t}=e;return(0,a.jsxs)("svg",{viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,a.jsx)("g",{id:"SVGRepo_bgCarrier","stroke-width":"0"}),(0,a.jsx)("g",{id:"SVGRepo_tracerCarrier","stroke-linecap":"round","stroke-linejoin":"round"}),(0,a.jsxs)("g",{id:"SVGRepo_iconCarrier",children:[" ",(0,a.jsx)("path",{d:"M11 6C13.7614 6 16 8.23858 16 11M16.6588 16.6549L21 21M19 11C19 15.4183 15.4183 19 11 19C6.58172 19 3 15.4183 3 11C3 6.58172 6.58172 3 11 3C15.4183 3 19 6.58172 19 11Z",stroke:t,"stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"})," "]})]})},g=e=>{let{onClick:t,size:s,children:r}=e;return(0,a.jsx)("button",{onClick:t,className:"iconButton-T2Dtdy",style:{width:s,height:s},children:r})}},769:function(e,t,s){s.d(t,{Y:()=>b});var a=s(893),r=s(704),n=s(522);let i=()=>{let{toggleSideBar:e}=(0,r.A)();return(0,a.jsx)("div",{className:"closedLayout-aGGVSp",children:(0,a.jsx)("div",{className:"header-sSCpf4",children:(0,a.jsx)(n.hU,{onClick:e,size:35,children:(0,a.jsx)(n.$C,{color:"white"})})})})};var l=s(234),o=s(776);let c={layout:"layout-J0drcS",messageContainer:"messageContainer-Lizb0g",message:"message-rLUv1P",data:"data-qWm_VC",chatButton:"chatButton-AZIqSK"};var d=s(885);let u=e=>{let{chat:t}=e,s=(0,l.TL)(),r=async()=>{await s((0,d.zU)(t.id))};return(0,a.jsx)("div",{className:c.layout,children:(0,a.jsxs)(o.rU,{to:`/chats/${t.id}`,className:c.chatButton,onClick:r,children:[(0,a.jsx)("h2",{className:c.chatName,children:t.name}),t.lastMessage&&(0,a.jsxs)("div",{className:c.messageContainer,children:[(0,a.jsx)("p",{className:c.message,children:t.lastMessage.content.length>50?`${t.lastMessage.content.substring(0,20)}...`:t.lastMessage.content}),(0,a.jsx)("p",{className:c.data,children:new Date(t.lastMessage.sentAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})]})})};var h=s(294);let g=()=>{let e=(0,l.TL)(),t=(0,l.CG)(d.tr);return(0,h.useEffect)(()=>{e((0,d.gE)())},[e]),(0,a.jsx)("div",{className:"layout-SkiJXD",children:(0,a.jsx)("main",{children:null==t?void 0:t.map(e=>(0,a.jsx)(u,{chat:e},e.id))})})},x=()=>{let[e,t]=(0,h.useState)("");return(0,a.jsxs)("div",{className:"layout-UdNfYX",children:[(0,a.jsx)(n.Fy,{label:"",placeholder:"search user",onChange:e=>t(e.target.value),value:e}),(0,a.jsx)(n.hU,{size:35,children:(0,a.jsx)(n.W1,{color:"white"})})]})};var j=s(821),m=s(660),p=s(570),f=s(107);let v=e=>{let[t,s]=(0,h.useState)(""),[r,i]=(0,h.useState)(""),o=(0,l.TL)(),c=async()=>{if(!r||!t)return;let a=await j.Sj.getUserByEmail(t);if(a){let e={senderUserId:localStorage.userId,recipientUserId:a.id,message:r},t=await m.d.createPersonalChat(e);if(t&&t.lastMessageId){let e=await f.u.getMessageById(t.lastMessageId),s={id:t.id,name:t.name,isGroupChat:t.isGroupChat,createdAt:t.createdAt,createdBy:t.createdBy,role:t.role,lastMessage:e,chatMembers:t.chatMembers};o((0,p.VV)(s))}}s(""),i(""),await e.closeModal()};return(0,a.jsx)("div",{className:"layout-e34IRh",children:(0,a.jsxs)("div",{className:"container-rsz2jo",children:[(0,a.jsx)(n.Fy,{label:"User email",value:t,onChange:e=>s(e.target.value)}),(0,a.jsx)(n.Fy,{label:"Sending message",value:r,onChange:e=>i(e.target.value)}),(0,a.jsx)("div",{children:(0,a.jsx)(n.Sn,{onClick:c,children:(0,a.jsx)("div",{children:"Create Chat"})})})]})})},y=()=>{let[e,t]=(0,h.useState)(!1),s=async()=>{t(!1)};return(0,a.jsxs)("div",{className:"layout-JCUtvM",children:[(0,a.jsx)(n.Sn,{onClick:()=>t(!0),children:(0,a.jsx)("div",{children:"Create chat"})}),(0,a.jsx)(n.u_,{isOpen:e,onClose:s,title:"Create New Chat",children:(0,a.jsx)(v,{closeModal:s})})]})},w=()=>{let{toggleSideBar:e}=(0,r.A)();return(0,a.jsxs)("div",{className:"openLayout-IXmicL",children:[(0,a.jsxs)("header",{className:"header-RPjAS6",children:[(0,a.jsxs)("div",{className:"topHeader-Sjbw9o",children:[(0,a.jsx)("h1",{children:"TalkWave"}),(0,a.jsx)(n.hU,{onClick:e,size:35,children:(0,a.jsx)(n.vJ,{color:"white"})})]}),(0,a.jsx)(x,{}),(0,a.jsx)(y,{})]}),(0,a.jsx)("main",{children:(0,a.jsx)(g,{})})]})},b=()=>{let{isOpen:e}=(0,r.A)();return(0,a.jsx)("div",{className:"layout-dh5F7t",children:e?(0,a.jsx)(w,{}):(0,a.jsx)(i,{})})}},204:function(e,t,s){s.a(e,async function(e,t){try{var a=s(893),r=s(294),n=s(745),i=s(665),l=e([i]);i=(l.then?(await l)():l)[0];let o=document.getElementById("root");o&&n.createRoot(o).render((0,a.jsx)(r.StrictMode,{children:(0,a.jsx)(i.Z,{})})),t()}catch(e){t(e)}})}},t={};function s(a){var r=t[a];if(void 0!==r)return r.exports;var n=t[a]={exports:{}};return e[a](n,n.exports,s),n.exports}s.m=e,(()=>{var e="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",t="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",a="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",r=e=>{e&&e.d<1&&(e.d=1,e.forEach(e=>e.r--),e.forEach(e=>e.r--?e.r++:e()))},n=s=>s.map(s=>{if(null!==s&&"object"==typeof s){if(s[e])return s;if(s.then){var n=[];n.d=0,s.then(e=>{i[t]=e,r(n)},e=>{i[a]=e,r(n)});var i={};return i[e]=e=>e(n),i}}var l={};return l[e]=function(){},l[t]=s,l});s.a=(s,i,l)=>{l&&((o=[]).d=-1);var o,c,d,u,h=new Set,g=s.exports,x=new Promise((e,t)=>{u=t,d=e});x[t]=g,x[e]=e=>{o&&e(o),h.forEach(e),x.catch(function(){})},s.exports=x,i(s=>{c=n(s);var r,i=()=>c.map(e=>{if(e[a])throw e[a];return e[t]}),l=new Promise(t=>{(r=()=>t(i)).r=0;var s=e=>e!==o&&!h.has(e)&&(h.add(e),e&&!e.d&&(r.r++,e.push(r)));c.map(t=>t[e](s))});return r.r?l:i()},e=>(e?u(x[a]=e):d(g),r(o))),o&&o.d<0&&(o.d=0)}})(),s.d=(e,t)=>{for(var a in t)s.o(t,a)&&!s.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},(()=>{s.g=(()=>{if("object"==typeof globalThis)return globalThis;try{return this||Function("return this")()}catch(e){if("object"==typeof window)return window}})()})(),s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=[];s.O=(t,a,r,n)=>{if(a){n=n||0;for(var i=e.length;i>0&&e[i-1][2]>n;i--)e[i]=e[i-1];e[i]=[a,r,n];return}for(var l=1/0,i=0;i<e.length;i++){for(var[a,r,n]=e[i],o=!0,c=0;c<a.length;c++)(!1&n||l>=n)&&Object.keys(s.O).every(e=>s.O[e](a[c]))?a.splice(c--,1):(o=!1,n<l&&(l=n));if(o){e.splice(i--,1);var d=r();void 0!==d&&(t=d)}}return t}})(),s.rv=()=>"1.2.8",(()=>{var e={980:0};s.O.j=t=>0===e[t];var t=(t,a)=>{var r,n,[i,l,o]=a,c=0;if(i.some(t=>0!==e[t])){for(r in l)s.o(l,r)&&(s.m[r]=l[r]);if(o)var d=o(s)}for(t&&t(a);c<i.length;c++)n=i[c],s.o(e,n)&&e[n]&&e[n][0](),e[n]=0;return s.O(d)},a=self.webpackChunkTalkWave_User_Ui=self.webpackChunkTalkWave_User_Ui||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),s.ruid="bundler=rspack@1.2.8";var a=s.O(void 0,["72","361","118","912"],function(){return s(204)});a=s.O(a)})();